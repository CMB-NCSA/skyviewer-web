<!doctype html>
<html>

<head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">
    <title>SPT3G Wide skyviewer</title>
</head>
<body>
<div id="aladin-lite-div" style="width: 2000px; height: 2000px"></div>
<!-- <script type="text/javascript" src="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js" charset="utf-8"></script> -->
<script type="text/javascript" src="resources_main/ncsa_aladin.js" charset="utf-8"></script>
<!-- <script type="text/javascript" src="js/aladin.umd.cjs" charset="utf-8"></script> -->


<script type="text/javascript">
    var aladin;

    A.init.then(() => {
    aladin = A.aladin('#aladin-lite-div',
	             {target: "23:31:00.0 -55:09:00.0",
                fov: 20,
	              reticleColor: "rgb(0, 0, 0)",
	  	          survey: "",
                projection: "ZEA",
                fullScreen: true,
                expandLayersControl: false,
                cooFrame: 'equatorial',
                showProjectionControl: true,
                showCooGridControl: false,
                showSimbadPointerControl: false,
                showCooGrid: false,
                showContextMenu: true});

  // set the local paths for the folders
  var hipsDir090 = `../hips/private/SPT_wide-2020_090GHz_HiPS/`;
  hipsDir090 = hipsDir090.substring(0,hipsDir090.lastIndexOf("/",hipsDir090.length));
  var hipsDir150 = `../hips/private/SPT_wide-2020_150GHz_HiPS/`;
  hipsDir150 = hipsDir150.substring(0,hipsDir150.lastIndexOf("/",hipsDir150.length));
  var hipsDir220 = `../hips/private/SPT_wide-2020_220GHz_HiPS/`;
  hipsDir220 = hipsDir220.substring(0,hipsDir220.lastIndexOf("/",hipsDir220.length));
  var lowellDir090 = `../hips/private/SPT_winter_low_ell_090GHz_HiPS/`;
  lowellDir090 = lowellDir090.substring(0,lowellDir090.lastIndexOf("/",lowellDir090.length));

  var hipsDirDESDR2 = `../hips/public/DES-DR2/`;
  hipsDirDESDR2 = hipsDirDESDR2.substring(0,hipsDirDESDR2.lastIndexOf("/",hipsDirDESDR2.length));

  var hipsDirMK = `../hips/private/MeerKAT_HiPS_D11/`;
  hipsDirMK  = hipsDirMK .substring(0,hipsDirMK .lastIndexOf("/",hipsDirMK.length));

// SPIRE HiPS
  var hipsDirSpire250 = `../hips/private/SPIRE_HiPS_250um/`;
  hipsDirSpire250  = hipsDirSpire250 .substring(0,hipsDirSpire250 .lastIndexOf("/",hipsDirSpire250.length));
  var hipsDirSpire350 = `../hips/private/SPIRE_HiPS_350um/`;
  hipsDirSpire350  = hipsDirSpire350 .substring(0,hipsDirSpire350 .lastIndexOf("/",hipsDirSpire350.length));
  var hipsDirSpire500 = `../hips/private/SPIRE_HiPS_500um/`;
  hipsDirSpire500  = hipsDirSpire500 .substring(0,hipsDirSpire500 .lastIndexOf("/",hipsDirSpire500.length));


  // Create the SPT surveys for Winter 2020
  const wide090GHz = aladin.createImageSurvey('NCSA/P/SPT/SPT3G-WIDE-090GHZ', 'SPT3G Wide 2020 090GHz', hipsDir090, 'equatorial', 7, {minCut:-0.1, maxCut:0.1, colormap:'viridis', imgFormat: 'fits'});
  const wide150GHz = aladin.createImageSurvey('NCSA/P/SPT/SPT3G-WIDE-150GHZ', 'SPT3G Wide 2020 150GHz', hipsDir150, 'equatorial', 7, {minCut:-0.1, maxCut:0.1, colormap:'viridis', imgFormat: 'fits'});
  const wide220GHz = aladin.createImageSurvey('NCSA/P/SPT/SPT3G-WIDE-220GHZ', 'SPT3G Wide 2020 220GHz', hipsDir220, 'equatorial', 7, {minCut:-0.1, maxCut:0.1, colormap:'viridis', imgFormat: 'fits'});
  const lowell090GHz = aladin.createImageSurvey('NCSA/P/SPT/WINTER-LOW_ELL-090GHZ', 'SPT3G Winter low ell 090GHz', lowellDir090, 'equatorial', 7, {minCut:-0.25, maxCut:0.25, colormap:'viridis', imgFormat: 'fits'});
  const NCSA_DES_DR2 = aladin.createImageSurvey('P/NCSA-DES-DR2/ColorIRG', 'NCSA/DES DR2 ColorIRG', hipsDirDESDR2, 'equatorial', 11, {imgFormat: 'png'});
  const MK_SPT3G = aladin.createImageSurvey('NCSA/P/MK/MK-SPT3G', 'MeerKAT SPT3G', hipsDirMK, 'equatorial', 11, {minCut:-0.000089, maxCut:0.000087, colormap:'grayscale', imgFormat: 'fits'});
  const SPIRE_250 = aladin.createImageSurvey('NCSA/P/SPIRE/SPIRE-250um', 'SPIRE-250um', hipsDirSpire250, 'equatorial', 11, {minCut:-0.039, maxCut:0.064, colormap:'grayscale', imgFormat: 'fits'});
  const SPIRE_350 = aladin.createImageSurvey('NCSA/P/SPIRE/SPIRE-350um', 'SPIRE-350um', hipsDirSpire350, 'equatorial', 11, {minCut:-0.039, maxCut:0.064, colormap:'grayscale', imgFormat: 'fits'});
  const SPIRE_500 = aladin.createImageSurvey('NCSA/P/SPIRE/SPIRE-500um', 'SPIRE-500um', hipsDirSpire500, 'equatorial', 11, {minCut:-0.039, maxCut:0.064, colormap:'grayscale', imgFormat: 'fits'});



  aladin.setImageLayer(wide090GHz, "090GHz");
	aladin.setImageLayer(wide220GHz, "220GHz");
  aladin.setImageLayer(lowell090GHz);
  // aladin.setImageLayer(MK_SPT3G, "MeerKAT");
  aladin.setOverlayImageLayer(wide150GHz, "150GHz");
  aladin.setOverlayImageLayer(MK_SPT3G, "MeerKAT");
  aladin.setOverlayImageLayer(SPIRE_250, "SPIRE-250um");
	aladin.setBaseImageLayer("P/NCSA-DES-DR2/ColorIRG");

        // manage URL parameters
        const searchParams = new URL(document.location).searchParams;
        if (searchParams.has('baseImageLayer')) {
            aladin.setBaseImageLayer(searchParams.get('baseImageLayer'));
        }
        if (searchParams.has('overlayImageLayer')) {
            aladin.setOverlayImageLayer(searchParams.get('overlayImageLayer'));
        }
        if (searchParams.has('cooFrame')) {
            aladin.setFrame(searchParams.get('cooFrame'));
        }
        if (searchParams.has('fov')) {
            aladin.setFoV(parseFloat(searchParams.get('fov')));
        }
        if (searchParams.has('ra') && searchParams.has('dec')) {
            aladin.gotoRaDec(parseFloat(searchParams.get('ra')), parseFloat(searchParams.get('dec')));
        }
        if (searchParams.has('showReticle')) {
            aladin.showReticle(searchParams.get('showReticle')==='true');
        }
        if (searchParams.has('projection')) {
            aladin.setProjection(searchParams.get('projection'));
        }
        if (searchParams.has('showCooGrid')) {
            const b = searchParams.get('showCooGrid') === 'true';
            aladin.view.setGridConfig({
                enabled: b
            });
        }


    });
</script>

</body>
</html>
